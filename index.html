<h2>Messages</h2>
<table id="messagesTable">
    <thead>
        <tr>
            <th>ID</th>
            <th>Sender</th>
            <th>Text</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
async function loadMessages(groupId) {
    const res = await fetch(`/messages/${groupId}`);
    const messages = await res.json();
    const tbody = document.querySelector("#messagesTable tbody");
    tbody.innerHTML = "";
    messages.forEach(m => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${m.id}</td><td>${m.sender_id}</td><td>${m.text || ""}</td><td>${m.date}</td>`;
        tbody.appendChild(tr);
    });
}

// update when group selected
groupSelect.addEventListener("change", e => {
    const groupId = e.target.value;
    loadMembers(groupId);
    loadMessages(groupId);
});
